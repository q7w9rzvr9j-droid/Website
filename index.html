<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Zachary Schurr | Portfolio</title>
  <link rel="stylesheet" href="assets/styles.css"/>
</head>
<body>
  <div class="nav">
    <div class="nav-inner">
      <div class="brand"><span class="dot"></span><b>Zachary Schurr's Portfolio</b></div>
      <div class="links">
        <a href="#home">Home</a>
        <a href="#about">About Me</a>
        <a href="#skills">Skills</a>
        <a href="#cad">CAD Designs</a>
        <a href="#boats">Boats & Marine Projects</a>
        <a href="#projects">Projects & Fabrication</a>
        <a href="#resume">Resume</a>
        <a href="#contact">Contact</a>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- HOME -->
    <section id="home">
      <div class="intro-layout">
        <div class="intro-text">
          <h1 class="intro-title">Zachary Schurr</h1>
          <p class="intro-subtitle">Mechanical Engineering Portfolio</p>
        </div>
        <div class="intro-photo-slot" aria-label="Profile image placeholder">
            <img src="images/zach.jpg" alt="Zachary Schurr profile photo" loading="lazy" onerror="this.style.display='none';this.parentElement.classList.add('empty');">
            <span class="intro-photo-note">Add your photo at zach.jpg</span>
        </div>
      </div>
    </section>

    <!-- About Me -->
    <section id="about" class="section">
      <h2>About Me</h2>
      <div class="about-grid">
        <div class="card about-card">
          <h3>Me</h3>
          <p class="small">
 A lot of my best memories come from time on the water with family and friends, and working on marine systems
  showed me how much those experiences depend on things working the way they should. That perspective is what pushed
  me toward mechanical engineering. Being part of building products that people can rely on is something I am excited
  about, especially when it connects back to experiences that have meant a lot to me personally.
</p>

        </div>
        <div class="card about-card">
          <h3>How I Work</h3>
          <p class="small">
  I take ownership of problems and follow them through until they are solved. I prefer working hands on
  when diagnosing issues and I approach problems in a structured way rather than guessing.
  Clear communication and accountability matter to me, especially when working with others on complex systems.
</p>

        </div>
        <div class="card about-card">
          <h3>What I’m Looking For</h3>
          <p class="small">
  I am looking for a role where I can contribute meaningfully to complex systems while continuing to grow as an engineer.
  I am motivated by environments that value reliability, attention to detail, and collaboration across engineering,
  manufacturing, and service.
</p>

        </div>
      </div>
       <!-- SKILLS -->
<section id="skills" class="section">
  <h2>Skills</h2>

  <div class="card" style="padding:18px;">
    <div class="skills-grid">
      <div>
        <h4>CAD &amp; Design</h4>
        <p class="small">SolidWorks, Creo, AutoCAD, Technical Drawings, Blue Beam, BOMs</p>
      </div>

      <div>
        <h4>Mechanical &amp; Marine Systems</h4>
        <p class="small">Marine electrical systems, hydraulic trim/steering, engines and drivetrains, system troubleshooting, installation and service considerations</p>
      </div>

      <div>
        <h4>Fabrication &amp; Prototyping</h4>
        <p class="small">CNC machining, laser cutting, 3D printing, basic welding, shop tools and assembly</p>
      </div>

      <div>
        <h4>Analysis &amp; Tools</h4>
        <p class="small">Excel for calculations and organization, basic MATLAB, measurement and testing, documentation</p>
      </div>

      <div>
        <h4>Professional Skills</h4>
        <p class="small">Clear communication, attention to detail, ownership of tasks, working across design and build teams</p>
      </div>
    </div>
  </div>
</section>

    </section>
    <!-- CAD -->
    <section id="cad" class="section">
      <h2>CAD Designs</h2>
      <div id="cadGrid" class="cad-grid"></div>
    </section>

    <!-- BOATS -->
    <section id="boats" class="section">
      <h2>Boats & Marine Projects</h2>
      <div class="card" style="padding:18px;">
        <div id="boatsGallery" class="scatter-gallery" aria-label="Boats gallery"></div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects" class="section">
      <h2>Projects & Fabrication</h2>
      <div class="card" style="padding:18px;">
        <div class="gallery-block">
          <h3>Projects</h3>
          <div id="projectsGallery" class="scatter-gallery" aria-label="Projects gallery"></div>
        </div>
        <div class="gallery-block" style="margin-top:18px;">
          <h3>Fabrication</h3>
          <div id="fabricationGallery" class="scatter-gallery" aria-label="Fabrication gallery"></div>
        </div>
      </div>
    </section>


    <!-- RESUME -->
    <section id="resume" class="section">
      <h2>Resume</h2>
      <div class="card" style="padding:18px;">
        <div class="cta" style="margin-top:0;">
          <a class="btn primary resume-link" href="docs/Zachary%20Schurr%20Regal%20Boats%20Cover%20Letter%20and%20Resume.pdf" target="_blank" rel="noopener">Open Resume PDF</a>
        </div>
        <!--<div class="resume-stack" id="resumePages" style="margin-top:14px;" aria-label="Resume pages"></div>-->
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="section">
      <h2>Contact</h2>
      <div class="card" style="padding:18px;">
        <div class="small">
          <b>Email:</b> <a class="contact-link" href="mailto:zdschurr@gmail.com">zdschurr@gmail.com</a><br/>
          <b>Phone:</b> <a class="contact-link" href="tel:7866142395">786-614-2395</a><br/>
          <b>LinkedIn:</b> <a class="contact-link" href="https://www.linkedin.com/in/zachary-schurr" target="_blank" rel="noopener">www.linkedin.com/in/zachary-schurr</a>
        </div>
      </div>

      <div class="footer">
        <div>© <span id="y"></span> Zachary Schurr</div>
      </div>
    </section>
  </div>

  <!-- CAD MODAL -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-label="CAD drawings">
    <div class="card modal">
      <div class="head">
        <div>
          <h2 id="modalTitle">CAD Item</h2>
          <div id="modalSub" class="small"></div>
        </div>
        <button class="x" id="modalClose" aria-label="Close">Close</button>
      </div>
      <div class="body">
        <div id="modalBadges" class="badges" style="margin-top:0;"></div>

        <div class="section" style="margin-top:14px;">
          <h2>Drawing Sets</h2>
          <div id="modalFiles"></div>

          <div class="embed" style="margin-top:14px;">
            <iframe id="modalViewer" src="" width="100%" height="100%" style="border:0;" title="CAD PDF Viewer"></iframe>
          </div>
        </div>

        <div class="section" style="margin-top:14px;">
          <h2>Images</h2>
          <div id="modalImages" class="gallery"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="imageLightbox" class="image-lightbox" role="dialog" aria-modal="true" aria-label="Gallery image viewer">
    <div class="image-lightbox-card">
      <div class="image-lightbox-head">
        <div id="imageLightboxCaption" class="small"></div>
        <div class="image-lightbox-actions">
          <a id="imageLightboxOpen" class="btn" href="#" target="_blank" rel="noopener">Open in new tab</a>
          <button id="imageLightboxClose" class="x" aria-label="Close image viewer">Close</button>
        </div>
      </div>
      <div class="image-lightbox-body">
        <img id="imageLightboxImg" alt="Gallery image"/>
      </div>
    </div>
  </div>

  <script src="assets/app.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
    const resumePdfPath = 'docs/Zachary%20Schurr%20Regal%20Boats%20Cover%20Letter%20and%20Resume.pdf';

    async function renderResumePages(){
      const mount = document.getElementById('resumePages');
      if(!mount) return;
      if(!window.pdfjsLib){
        mount.innerHTML = '';
        return;
      }

      try{
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        const loadingTask = pdfjsLib.getDocument(resumePdfPath);
        const pdf = await loadingTask.promise;

        mount.innerHTML = '';
        for(let pageNum = 1; pageNum <= pdf.numPages; pageNum++){
          const page = await pdf.getPage(pageNum);
          const viewport = page.getViewport({ scale: 1 });
          const targetWidth = Math.min(mount.clientWidth || 900, 900);
          const scale = targetWidth / viewport.width;
          const scaledViewport = page.getViewport({ scale });

          const canvas = document.createElement('canvas');
          canvas.className = 'resume-page';
          canvas.width = Math.floor(scaledViewport.width);
          canvas.height = Math.floor(scaledViewport.height);

          const context = canvas.getContext('2d', { alpha: false });
          await page.render({ canvasContext: context, viewport: scaledViewport }).promise;

          mount.appendChild(canvas);
        }
      }catch(_err){
        mount.innerHTML = '';
      }
    }

    renderResumePages();

    const backdrop = document.getElementById('modalBackdrop');
    const closeBtn = document.getElementById('modalClose');
    const viewer = document.getElementById('modalViewer');

    function openModal(item){
      document.getElementById('modalTitle').textContent = item.title || 'CAD Item';
      document.getElementById('modalSub').textContent = item.subtitle || '';
      document.getElementById('modalBadges').innerHTML = (item.tags||[]).map(t=>`<span class="badge">${t}</span>`).join('');

      const filesWrap = document.getElementById('modalFiles');
      filesWrap.innerHTML = (item.drawings||[]).map(d => `
        <div class="file-row">
          <div>
            <div><b>${d.label}</b></div>
            <div class="small">${d.file}</div>
          </div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;">
            <a class="btn" href="${d.file}" target="_blank" rel="noopener">Open</a>
            <a class="btn primary" href="javascript:void(0)" onclick="swapPdf('${d.file}')">View here</a>
          </div>
        </div>
      `).join('');

      const imgsWrap = document.getElementById('modalImages');
      imgsWrap.innerHTML = (item.images||[]).map(im => `
        <div class="gimg"><img src="${im.file}" alt="${im.label}" onerror="this.src='assets/placeholders/cad1.svg';"></div>
      `).join('');

      const first = (item.drawings && item.drawings.length) ? item.drawings[0].file : '';
      viewer.src = first;
      backdrop.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    function closeModal(){
      backdrop.style.display = 'none';
      document.body.style.overflow = '';
      viewer.src = '';
    }

    function swapPdf(path){ viewer.src = path; }

    closeBtn.addEventListener('click', closeModal);
    backdrop.addEventListener('click', (e)=>{ if(e.target === backdrop) closeModal(); });
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape' && backdrop.style.display === 'flex') closeModal(); });

    fetch('data/cad.json')
      .then(r=>r.json())
      .then(items=>{
        const grid = document.getElementById('cadGrid');
        grid.innerHTML = items.map(it=>`
          <div class="card tile" style="cursor:pointer" tabindex="0" role="button" aria-label="Open ${it.title}">
            <div class="thumb"><img src="${it.thumb}" alt="${it.title}"></div>
            <div class="tile-body">
              <h3>${it.title}</h3>
              <div class="meta">${it.subtitle || ''}</div>
              <div class="badges">${(it.tags||[]).slice(0,4).map(t=>`<span class="badge">${t}</span>`).join('')}</div>
            </div>
          </div>
        `).join('');
        [...grid.children].forEach((el,i)=>{
          el.addEventListener('click', ()=>openModal(items[i]));
          el.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') openModal(items[i]); });
        });
      })
      .catch(()=>{ document.getElementById('cadGrid').innerHTML = '<div class="small">Could not load CAD list. Check data/cad.json</div>'; });

    function cleanLabel(path){
      const last = path.split('/').pop() || path;
      return decodeURIComponent(last)
        .replace(/\.[^.]+$/, '')
        .replace(/[_-]+/g, ' ')
        .trim();
    }

    function pathStem(path){
      const filename = (path || '').split('/').pop() || '';
      return filename.replace(/\.[^.]+$/, '').toLowerCase().trim();
    }

    function normalizeGalleryEntry(entry){
      if (typeof entry === 'string'){
        return { src: entry, thumb: entry };
      }

      const src = (entry && (entry.src || entry.file || '')).trim();
      const thumb = (entry && (entry.thumb || '')).trim();
      if (!src){
        return { src: '', thumb: '' };
      }

      const srcStem = pathStem(src);
      const thumbStem = pathStem(thumb);
      const thumbLooksRelated = thumb && thumbStem && srcStem && thumbStem === srcStem;

      return {
        src,
        thumb: thumbLooksRelated ? thumb : src
      };
    }

    function escapeAttr(text){
      return String(text || '')
        .replace(/&/g, '&amp;')
        .replace(/"/g, '&quot;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');
    }

    const imageLightbox = document.getElementById('imageLightbox');
    const imageLightboxImg = document.getElementById('imageLightboxImg');
    const imageLightboxCaption = document.getElementById('imageLightboxCaption');
    const imageLightboxOpen = document.getElementById('imageLightboxOpen');
    const imageLightboxClose = document.getElementById('imageLightboxClose');

    function openImageLightbox(src, label){
      imageLightboxImg.src = src;
      imageLightboxImg.alt = label || 'Gallery image';
      imageLightboxCaption.textContent = label || '';
      imageLightboxOpen.href = src;
      imageLightbox.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    function closeImageLightbox(){
      imageLightbox.style.display = 'none';
      imageLightboxImg.src = '';
      if (backdrop.style.display !== 'flex'){
        document.body.style.overflow = '';
      }
    }

    imageLightboxClose.addEventListener('click', closeImageLightbox);
    imageLightbox.addEventListener('click', (event) => {
      if (event.target === imageLightbox){
        closeImageLightbox();
      }
    });
    imageLightboxImg.addEventListener('click', (event) => event.stopPropagation());

    function wireGalleryInteractions(mount){
      const cards = [...mount.querySelectorAll('.scatter-item')];

      cards.forEach(card => {
        const img = card.querySelector('img');
        const openLink = card.querySelector('.open-original');
        const fallbackPath = img?.dataset?.src || '';

        if(!img){
          return;
        }

        img.addEventListener('error', () => {
          const directSource = fallbackPath;
          if (directSource && img.src !== directSource){
            img.src = directSource;
            return;
          }
          card.classList.add('failed');
        });

        const openViewer = () => {
          const source = img.currentSrc || fallbackPath;
          if (!source){
            return;
          }
          openImageLightbox(source, img.alt || 'Gallery image');
        };

        card.addEventListener('click', openViewer);
        card.addEventListener('keydown', (event) => {
          if (event.key === 'Enter' || event.key === ' '){
            event.preventDefault();
            openViewer();
          }
        });

        openLink?.addEventListener('click', (event) => event.stopPropagation());
      });
    }

    function renderSectionGallery(targetId, files){
      const mount = document.getElementById(targetId);
      if(!mount) return;
      if(!files || !files.length){
        mount.innerHTML = '<div class="small">No images found yet.</div>';
        return;
      }

      mount.innerHTML = files.map((entry, index) => {
        const normalized = normalizeGalleryEntry(entry);
        const fullPath = normalized.src;
        const thumbPath = normalized.thumb || fullPath;
        if (!fullPath){
          return '';
        }
        const safePath = encodeURI(fullPath);
        const safeThumbPath = encodeURI(thumbPath);
        const label = cleanLabel(fullPath);
        const safeLabel = escapeAttr(label);
        return `
          <figure class="scatter-item" tabindex="0" role="button" aria-label="Open ${safeLabel}" style="--seed:${index};">
            <img src="${safeThumbPath}" data-src="${safePath}" alt="${safeLabel}" loading="lazy" decoding="async">
            <a class="open-original" href="${safePath}" target="_blank" rel="noopener">Open original</a>
          </figure>
        `;
      }).join('');

      wireGalleryInteractions(mount);
    }

    fetch('data/gallery.json')
      .then(r => r.json())
      .then(data => {
        renderSectionGallery('projectsGallery', data.projects || []);
        renderSectionGallery('fabricationGallery', data.fabrication || []);
        renderSectionGallery('boatsGallery', data.boats || []);
      })
      .catch(() => {
        renderSectionGallery('projectsGallery', []);
        renderSectionGallery('fabricationGallery', []);
        renderSectionGallery('boatsGallery', []);
      });

    window.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape' && imageLightbox.style.display === 'flex'){
        closeImageLightbox();
      }
    });
  </script>
</body>
</html>
